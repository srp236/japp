import Head from 'next/head'
import Image from 'next/image'
import { useRouter } from 'next/router'
import styles from '@/src/styles/Home.module.css'
import styles2 from '@/src/styles/FlashCard.module.css'
import React, { useEffect, useState } from 'react'
import { Layout, Row, Col, Spin, notification, Card } from 'antd';
import { isKanji, getKanjiInfo, KanjiList, flashCardDoc, FlashSets, CommonFoot } from '../../utils/methods'
import { CheckOutlined, CloseOutlined } from '@ant-design/icons';
import { getDocuQuery, getData } from '@/src/firebase/firestore/getData'

const { Header, Footer, Content } = Layout;

export default function FlashCardSet() {
  const [kanji, setKanji] = useState([]);
  const router = useRouter()
  const {query: {sett}} = router

  const getKanji = async(setName) => {
    console.log(setName)
    const list = await getDocuQuery('kanji', 'flashcardRef', '==', 'Test');
    setKanji(list)
  }

  const Flashcards = () => {
    return (
      kanji.map(element => (
        <div className={styles.ccard} id='ccard' onClick={()=>{      
          if(document.getElementById('cinner').style.transform == 'rotateY(180deg)'){
            document.getElementById('cinner').style.transform = 'rotateY(0deg)'
          } else {
            document.getElementById('cinner').style.transform = 'rotateY(180deg)'
          }
        }}>
          <div id='cinner' className={styles.cinner}>
            <div className={styles.cfront}>
              <Card style={{backgroundColor:'green'}}>
                <h2>{element.kanji}</h2>
              </Card>
            </div>
            <div className={styles.cback}>
              <Card>
                <p>(1) {(element.meaning).join(', ')}</p>
                <p>kun-yomi: {(element.kunyomi).join('、')}</p>
                <p>On Yomi: {(element.onyomi).join('、')}</p>
              </Card>
            </div>
          </div>
        </div>
      ))
    )
  }

  useEffect(()=>{
    getKanji(sett)
  },[router])

  return (
    <>
    <Head>
      <title>だんだん</title>
      <meta name="description" content="Generated by create next app" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="icon" href="/favicon.ico" />
    </Head>
    <Header className={styles.headerStyle} style={{backgroundColor:'white'}}>
      <Image alt='logo' width={120} height={50} src="/images/logo_red.png" />
    </Header>
    <div className={styles.bar}></div>
    <Content>
      <center>
        <Flashcards />
      </center>
    </Content>
    <CommonFoot/>
    </>
  )
}